<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preparación de Bowl Personalizado | Fruletto</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --header-bg: rgba(25, 35, 60, 0.95);
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --footer-bg: #0f172a;
            --success-color: #28a745;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            padding-top: 60px;
            color: #333;
        }

        /* Header consistente */
        .navbar {
            background: var(--header-bg) !important;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 0.5rem 0;
            min-height: 60px;
        }

        .navbar-brand img {
            height: 30px;
            transition: all 0.3s ease;
        }

        .navbar-brand:hover img {
            transform: scale(1.05);
        }

        /* Contenedor principal */
        .bowl-container {
            max-width: 800px;
            margin: 2rem auto;
        }

        /* Card de formulario */
        .bowl-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        /* Secciones del formulario */
        .form-section {
            background: white;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .form-section h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price-tag {
            background: var(--success-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .included-tag {
            background: #6c757d;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        /* Opciones */
        .options-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(106, 17, 203, 0.1);
        }

        .option input[type="checkbox"],
        .option input[type="radio"] {
            margin-right: 0.75rem;
            width: 18px;
            height: 18px;
        }

        .selection-counter {
            text-align: right;
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 1rem;
        }

        /* Total */
        .total-section {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            text-align: right;
        }

        .total-section h3 {
            font-size: 1.5rem;
            margin-bottom: 0;
        }

        #total-price {
            color: var(--primary-color);
            font-weight: 700;
        }

        /* Botones */
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 10px;
            padding: 0.75rem 2rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }

        .btn-outline {
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            padding: 0.75rem 2rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .btn-outline:hover {
            background-color: rgba(106, 17, 203, 0.05);
        }

        /* Footer */
        .main-footer {
            background: var(--footer-bg);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
        }
    </style>
</head>
<body>
    <!-- Header consistente -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="img/Logo.png" alt="Fruletto">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="reporte.html">Registro ventas</a></li>
                    <li class="nav-item"><a class="nav-link" href="factura.html">Factura</a></li>
                    <li class="nav-item"><a class="nav-link" href="inventario.html">Inventario</a></li>
                </ul>
                <a href="crea_bowl.html" class="btn btn-outline-light btn-sm ms-3">
                    <i class="fas fa-plus-circle me-1"></i>Crear bowl
                </a>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main class="container bowl-container">
        <div class="card bowl-card">
            <div class="card-header">
                <h1 class="mb-0"><i class="fas fa-ice-cream me-2"></i>Personaliza tu Bowl</h1>
            </div>
            <div class="card-body p-4 p-md-5">
                <form id="bowlForm">
                    <div class="price-info mb-4 text-center">
                        <p class="mb-1"><strong>Precio base: $15.000</strong> (incluye 2 toppings + 1 fruta)</p>
                        <p class="mb-0">Adicionales: $3.000 c/u (máximo 3 adicionales)</p>
                    </div>
                    
                    <!-- Base de helado -->
                    <div class="form-section">
                        <h2>Base de Helado <span class="price-tag">$15.000</span></h2>
                        <div class="options-group">
                            <div class="option">
                                <input type="radio" id="vainilla" name="base" value="Proteína sabor a vainilla" required>
                                <label for="vainilla">Proteína sabor a vainilla</label>
                            </div>
                            <div class="option">
                                <input type="radio" id="acai" name="base" value="Acai">
                                <label for="acai">Acai</label>
                            </div>
                            <div class="option">
                                <input type="radio" id="chocolate" name="base" value="Chocolate">
                                <label for="chocolate">Chocolate</label>
                            </div>
                        </div>
                    </div>

                    <!-- Toppings -->
                    <div class="form-section">
                        <h2>Toppings <span class="included-tag">2 incluidos</span></h2>
                        <div class="options-group toppings-group">
                            <div class="option">
                                <input type="checkbox" id="chips" name="toppings" value="Chips de chocolate" data-max="2">
                                <label for="chips">Chips de chocolate</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="mani" name="toppings" value="Maní" data-max="2">
                                <label for="mani">Maní</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="almendra" name="toppings" value="Almendra" data-max="2">
                                <label for="almendra">Almendra</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="granola" name="toppings" value="Granola" data-max="2">
                                <label for="granola">Granola</label>
                            </div>
                        </div>
                        <p class="selection-counter">Seleccionados: <span id="toppings-counter">0</span>/2</p>
                    </div>

                    <!-- Frutas -->
                    <div class="form-section">
                        <h2>Frutas <span class="included-tag">1 incluida</span></h2>
                        <div class="options-group fruits-group">
                            <div class="option">
                                <input type="checkbox" id="fresa" name="frutas" value="Fresa" data-max="1">
                                <label for="fresa">Fresa</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="banano" name="frutas" value="Banano" data-max="1">
                                <label for="banano">Banano</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="arandanos" name="frutas" value="Arándanos" data-max="1">
                                <label for="arandanos">Arándanos</label>
                            </div>
                        </div>
                        <p class="selection-counter">Seleccionados: <span id="fruits-counter">0</span>/1</p>
                    </div>

                    <!-- Adicionales -->
                    <div class="form-section">
                        <h2>Adicionales <span class="price-tag">$3.000 c/u</span></h2>
                        <p class="note mb-3">Puedes seleccionar hasta 3 ingredientes adicionales</p>
                        <div class="options-group extras-group">
                            <div class="option">
                                <input type="checkbox" id="adicional-chips" name="adicionales" value="Chips de chocolate" data-max="3">
                                <label for="adicional-chips">Chips de chocolate</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-mani" name="adicionales" value="Maní" data-max="3">
                                <label for="adicional-mani">Maní</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-almendra" name="adicionales" value="Almendra" data-max="3">
                                <label for="adicional-almendra">Almendra</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-granola" name="adicionales" value="Granola" data-max="3">
                                <label for="adicional-granola">Granola</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-fresa" name="adicionales" value="Fresa" data-max="3">
                                <label for="adicional-fresa">Fresa</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-banano" name="adicionales" value="Banano" data-max="3">
                                <label for="adicional-banano">Banano</label>
                            </div>
                            <div class="option">
                                <input type="checkbox" id="adicional-arandanos" name="adicionales" value="Arándanos" data-max="3">
                                <label for="adicional-arandanos">Arándanos</label>
                            </div>
                        </div>
                        <p class="selection-counter">Seleccionados: <span id="extras-counter">0</span>/3</p>
                    </div>
                    
                    <!-- Total -->
                    <div class="total-section">
                        <h3>Total a pagar: <span id="total-price">$15.000</span></h3>
                    </div>
                    
                    <!-- Acciones -->
                    <div class="form-actions">
                        <a href="index.html" class="btn btn-outline">
                            <i class="fas fa-arrow-left me-1"></i>Volver
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check-circle me-1"></i>Confirmar Bowl
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container text-center">
            <img src="img/Logo.png" alt="Fruletto" width="100" class="mb-3">
            <p class="mb-2">© 2023 Fruletto. Todos los derechos reservados.</p>
            <div class="social-icons">
                <a href="#" class="text-white mx-2"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-white mx-2"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-white mx-2"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const basePrice = 15000;
            const extraPrice = 3000;
            let total = basePrice;
            
            // Actualizar contadores y precio total
            function updateCounters() {
                // Contar toppings seleccionados
                const toppings = document.querySelectorAll('.toppings-group input[type="checkbox"]:checked');
                document.getElementById('toppings-counter').textContent = toppings.length;
                
                // Contar frutas seleccionadas
                const fruits = document.querySelectorAll('.fruits-group input[type="checkbox"]:checked');
                document.getElementById('fruits-counter').textContent = fruits.length;
                
                // Contar extras seleccionados
                const extras = document.querySelectorAll('.extras-group input[type="checkbox"]:checked');
                document.getElementById('extras-counter').textContent = extras.length;
                
                // Calcular total
                total = basePrice + (extras.length * extraPrice);
                document.getElementById('total-price').textContent = `$${total.toLocaleString('es-CO')}`;
            }
            
            // Limitar selecciones según el máximo permitido
            function setupCheckboxLimits() {
                document.querySelectorAll('input[type="checkbox"][data-max]').forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        const group = this.closest('.options-group');
                        const max = parseInt(this.getAttribute('data-max'));
                        const checked = group.querySelectorAll('input[type="checkbox"]:checked');
                        
                        if (checked.length > max) {
                            this.checked = false;
                            alert(`Solo puedes seleccionar hasta ${max} ${max === 1 ? 'opción' : 'opciones'} en esta sección`);
                        }
                        
                        updateCounters();
                    });
                });
            }
            
            // Validar antes de enviar
            document.getElementById('bowlForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validar base seleccionada
                if (!document.querySelector('input[name="base"]:checked')) {
                    alert('Por favor selecciona una base para tu bowl');
                    return;
                }
                
                // Validar toppings (exactamente 2)
                const toppings = document.querySelectorAll('.toppings-group input[type="checkbox"]:checked');
                if (toppings.length !== 2) {
                    alert('Debes seleccionar exactamente 2 toppings incluidos');
                    return;
                }
                
                // Validar frutas (exactamente 1)
                const fruits = document.querySelectorAll('.fruits-group input[type="checkbox"]:checked');
                if (fruits.length !== 1) {
                    alert('Debes seleccionar exactamente 1 fruta incluida');
                    return;
                }
                
                // Aquí iría la lógica para procesar el pedido
                const base = document.querySelector('input[name="base"]:checked').value;
                const toppingsSelected = Array.from(toppings).map(t => t.value);
                const fruitsSelected = Array.from(fruits).map(f => f.value);
                const extrasSelected = Array.from(document.querySelectorAll('.extras-group input[type="checkbox"]:checked')).map(e => e.value);
                
                console.log('Base:', base);
                console.log('Toppings:', toppingsSelected);
                console.log('Frutas:', fruitsSelected);
                console.log('Extras:', extrasSelected);
                console.log('Total:', total);
                
                alert('¡Tu bowl personalizado ha sido creado con éxito! Total: $' + total.toLocaleString('es-CO'));
                this.reset();
                updateCounters();
            });
            
            // Inicializar
            setupCheckboxLimits();
            updateCounters();
        });
    </script>
</body>
</html>